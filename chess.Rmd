---
title: "Women in Chess"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
library(tidyverse)
```

```{r}
#read in data
chess_jul18<-read_table("data/standard_jul18frl.txt")
chess_jul18$date<-as.Date("2018-07-01")
chess_jul18<-chess_jul18 %>% rename(rating=JUL18)

chess_jul13<-read_table("data/standard_jul13frl.txt")
chess_jul13$date<-as.Date("2013-07-01")
chess_jul13<-chess_jul13 %>% rename(rating=jul13)

ratings<-bind_rows(chess_jul18,chess_jul13)
#Some clean up
ratings<-ratings %>% rename(ID='ID Number')
ratings$ID<-as.character(ratings$ID)
ratings<-ratings %>% rename(birthyear='B-day')
ratings$birthyear<-as.integer(ratings$birthyear)
ratings<-ratings %>% mutate(birthyear=ifelse(birthyear<1920,0,birthyear))
ratings<-ratings %>% mutate(birthyear=na_if(birthyear,0))
ratings<-ratings %>% rename(gender=Sex)

```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).
```{r}
gg<- ratings %>% group_by(birthyear) %>% 
  summarise(avg_rating=as.integer(mean(rating))) %>% 
  filter(birthyear<1990) %>% 
  ggplot(aes(birthyear,avg_rating))+geom_line()
gg
```

